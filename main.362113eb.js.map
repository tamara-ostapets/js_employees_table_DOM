{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","header","categories","tbody","tBodies","rows","sortAsc","target","collection","i","title","textContent","array","sort","a","b","aWord","cells","bWord","localeCompare","aConverted","xChange","forEach","cell","classList","remove","add","sortDesc","bConverted","val","isNaN","split","join","replace","toLocaleString","style","currency","maximumSignificantDigits","addEventListener","e","sorted","contains","cellIndex","append","row","parentNode","form","createElement","className","insertAdjacentHTML","body","button","validateForm","obj","firstName","age","key","value","pushNotification","length","posTop","posRight","description","type","div","dataset","qa","top","right","setTimeout","preventDefault","employeeForm","elements","name","position","office","salary","newRow","initial","input","insertNew","focus","inputE","newValue","setAttribute","code","blurE"],"mappings":"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","file":"main.362113eb.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst header = document.querySelector('thead');\nconst categories = header.querySelector('tr');\nconst tbody = [...table.tBodies][0];\nconst rows = tbody.rows;\n\n// sorting\ncategories.addEventListener('click', (e) => {\n  const sorted = e.target.classList.contains('ascending')\n    ? sortDesc(e.target, rows, e.target.cellIndex)\n    : sortAsc(e.target, rows, e.target.cellIndex);\n\n  tbody.append(...sorted);\n});\n\nfunction sortAsc(target, collection, i) {\n  const title = target.textContent;\n  const array = [...collection];\n\n  switch (true) {\n    case (title === 'Name' || title === 'Position' || title === 'Office') :\n\n      array.sort((a, b) => {\n        const aWord = [...a.cells][i].textContent;\n        const bWord = [...b.cells][i].textContent;\n\n        return aWord.localeCompare(bWord);\n      });\n\n      break;\n\n    case (title === 'Age') :\n      array.sort((a, b) => {\n        return [...a.cells][i].textContent - [...b.cells][i].textContent;\n      });\n\n      break;\n\n    case (title === 'Salary') :\n      array.sort((a, b) => {\n        const aConverted = xChange([...a.cells][i].textContent);\n        const bConverted = xChange([...b.cells][i].textContent);\n\n        return aConverted - bConverted;\n      });\n\n      break;\n  }\n\n  [...categories.cells].forEach(cell => cell.classList.remove('ascending'));\n\n  target.classList.add('ascending');\n\n  return array;\n}\n\nfunction sortDesc(target, collection, i) {\n  const title = target.textContent;\n  const array = [...collection];\n\n  switch (true) {\n    case (title === 'Name' || title === 'Position' || title === 'Office') :\n\n      array.sort((a, b) => {\n        const aWord = [...a.cells][i].textContent;\n        const bWord = [...b.cells][i].textContent;\n\n        return bWord.localeCompare(aWord);\n      });\n\n      break;\n\n    case (title === 'Age') :\n      array.sort((a, b) => {\n        return [...b.cells][i].textContent - [...a.cells][i].textContent;\n      });\n\n      break;\n\n    case (title === 'Salary') :\n      array.sort((a, b) => {\n        const aConverted = xChange([...a.cells][i].textContent);\n        const bConverted = xChange([...b.cells][i].textContent);\n\n        return bConverted - aConverted;\n      });\n\n      break;\n  }\n\n  target.classList.remove('ascending');\n\n  return array;\n}\n\nfunction xChange(val) {\n  return !isNaN(val)\n    ? val.toLocaleString('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      maximumSignificantDigits: 2,\n    })\n    : +val.split(',').join('').replace('$', '');\n}\n\n// active row\ntbody.addEventListener('click', (e) => {\n  [...rows].forEach(row => row.classList.remove('active'));\n  e.target.parentNode.classList.add('active');\n});\n\n// form\nconst form = document.createElement('form');\n\nform.className = 'new-employee-form';\n\nform.insertAdjacentHTML('afterbegin',\n  `<label >\n    Name:\n    <input name = \"name\" data-qa=\"name\" type=\"text\">\n  </label>\n\n  <label>\n    Position:\n    <input name=\"position\" data-qa=\"position\" type=\"text\">\n  </label>\n\n  <label>\n    Office:\n    <select name=\"office\" data-qa=\"office\">\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n  </label>\n\n  <label>\n    Age:\n    <input name=\"age\" data-qa=\"age\" type=\"number\">\n  </label>\n\n  <label>\n    Salary:\n    <input name=\"salary\" data-qa=\"salary\" type=\"number\">\n  </label>\n\n  <button id=\"button\" type=\"submit\">\n    Save to table\n  </button>\n  `\n);\n\ndocument.body.append(form);\n\nconst button = document.querySelector('#button');\n\nbutton.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  const employeeForm = button.parentNode;\n  const { name: firstName,\n    position,\n    office,\n    age,\n    salary } = employeeForm.elements;\n\n  const newEmployee = {\n    firstName,\n    position,\n    office,\n    age,\n    salary,\n  };\n\n  if (validateForm(newEmployee)) {\n    const newRow = document.createElement('tr');\n\n    newRow.insertAdjacentHTML('afterbegin',\n      `<td>${firstName.value}</td>\n      <td>${position.value}</td>\n      <td>${office.value}</td>\n      <td>${age.value}</td>\n      <td>${xChange(+salary.value)}</td>`\n    );\n\n    tbody.append(newRow);\n\n    pushNotification(10, 10,\n      'Succesfully added',\n      'New employee is successfully added',\n      'success');\n  }\n});\n\nfunction validateForm(obj) {\n  const { firstName, age } = obj;\n\n  for (const key in obj) {\n    if (!obj[key].value) {\n      pushNotification(10, 10,\n        'All fields are required',\n        'Not all fiealds are filled in',\n        'error');\n\n      return false;\n    }\n  }\n\n  if (firstName.value.length < 4) {\n    pushNotification(10, 10,\n      'Invalid name',\n      'Name should have at least 4 charachters',\n      'error');\n\n    return false;\n  }\n\n  if (+age.value < 18 || +age.value > 90) {\n    pushNotification(10, 10,\n      'Invalid age',\n      'Age should be at least 18 and less than 90',\n      'error');\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction pushNotification(posTop, posRight, title, description, type) {\n  const body = document.querySelector('body');\n  const div = document.createElement('div');\n\n  div.className = `notification ${type}`;\n  div.dataset.qa = 'notification';\n\n  div.insertAdjacentHTML('afterbegin',\n    `<h2 class=\"title\">${title}</h2>\n    <p>${description}</p>`);\n\n  body.append(div);\n\n  div.style.top = `${posTop}px`;\n  div.style.right = `${posRight}px`;\n\n  setTimeout(() => {\n    div.remove();\n  }, 2000);\n\n  return div;\n};\n\n// editing\ntbody.addEventListener('dblclick', (e) => {\n  const cell = e.target;\n  const initial = cell.textContent;\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  cell.textContent = '';\n  cell.append(input);\n  input.focus();\n\n  input.addEventListener('keydown', (inputE) => {\n    const newValue = `${inputE.target.value}`;\n\n    input.setAttribute('value', newValue);\n\n    if (inputE.code === 'Enter') {\n      insertNew(newValue);\n    }\n  });\n\n  input.addEventListener('blur', (blurE) => {\n    const newValue = `${blurE.target.value}`;\n\n    input.setAttribute('value', newValue);\n    insertNew(newValue);\n  });\n\n  function insertNew(value) {\n    if (value === '') {\n      cell.textContent = initial;\n    } else {\n      cell.textContent = value;\n      input.remove();\n    }\n  }\n});\n"]}